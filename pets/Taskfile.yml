version: "3"

tasks:
  start:
    aliases:
      - start
    desc: "Start the local server"
    cmds:
      - go run ./cmd/pets/main.go -config ./config/local.yml
  new-migrate:
    aliases:
      - new
    desc: "Create new migration"
    cmds:
      - GOOSE_DRIVER=postgres GOOSE_MIGRATION_DIR=./migrations GOOSE_DBSTRING=postgres://postgres:1234@localhost:5444/pets goose create new-migration sql
  up:
    desc: "Migration up"
    cmds:
      - GOOSE_DRIVER=postgres GOOSE_MIGRATION_DIR=./migrations GOOSE_DBSTRING=postgres://postgres:1234@localhost:5444/pets goose up
  down:
    desc: "Migration down"
    cmds:
      - GOOSE_DRIVER=postgres GOOSE_MIGRATION_DIR=./migrations GOOSE_DBSTRING=postgres://postgres:1234@localhost:5444/pets goose down
